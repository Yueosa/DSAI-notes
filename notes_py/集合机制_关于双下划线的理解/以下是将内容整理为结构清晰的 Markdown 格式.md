### 🤖 Assistant

以下是将内容整理为结构清晰的 Markdown 格式，方便你随时查阅：

```markdown
# Python 双下划线方法（Dunder Methods）核心概念

## 1. 核心思想
- **对象的行为由 `__方法__` 定义**  
  （如 `print(obj)` → `__str__`，`for x in obj` → `__iter__`）
- **通过实现这些方法，可以完全自定义对象的行为**  
  （甚至让 `for` 循环做与遍历无关的事情）

## 2. 初学者只需记住
### (1) 关键原则
- **行为可编程**：想支持什么操作，就实现对应的 `__方法__`
- **协议优先**：Python 自动调用这些方法（如 `len(obj)` → `obj.__len__()`）
- **无需死记**：用时查文档，常见方法不超过 10 个

### (2) 必知方法示例
| 方法          | 触发场景               | 作用                     |
|---------------|-----------------------|--------------------------|
| `__init__`    | `obj = MyClass()`     | 初始化对象               |
| `__str__`     | `print(obj)`          | 定义对象的字符串表示     |
| `__iter__`    | `for x in obj`        | 返回迭代器，支持遍历     |
| `__contains__`| `x in obj`            | 实现成员检查             |
| `__len__`     | `len(obj)`            | 定义对象的“长度”         |

## 3. 快速理解技巧
### (1) 类比工具盒
- `print(obj)` → 看工具盒标签（`__str__`）
- `for x in obj` → 开盒取工具（`__iter__`）
- `obj[3]` → 按编号取工具（`__getitem__`）

### (2) 破坏性实验
```python
class Prank:
    def __len__(self):
        return 100  # 无数据但声称有100个元素

print(len(Prank()))  # 输出 100（理解协议灵活性）
```

## 4. 实战建议
1. **先会用再深入**  
   - 初级阶段：知道“行为可自定义”即可
   - 进阶时：通过需求驱动学习（如实现切片→`__getitem__`）

2. **查阅官方文档**  
   - [Python 数据模型文档](https://docs.python.org/3/reference/datamodel.html)

## 5. 经典示例
### 自定义 `for` 行为
```python
class Toy:
    def __iter__(self):
        yield "我是假的迭代器"
        yield "你其实在遍历空气"

for x in Toy():
    print(x)  # 输出两行字符串（与实际数据无关）
```

> **心法**：Python 的灵活性来自协议，类封装是调用协议的语法糖。
```

---

### 使用建议
1. 保存为 `python_dunder_cheatsheet.md`
2. 结合代码实践查阅，无需死记硬背
3. 当需要实现特定功能时，回来查对应方法
